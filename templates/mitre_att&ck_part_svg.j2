<svg xmlns="http://www.w3.org/2000/svg"
  style="background: transparent; background-color: transparent; color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" 
  {% set technique_width = 150 %}
  {% set technique_height = 75 %}
  {% set technique_space = 25 %}
  {% set techinque_offset = technique_height + technique_space %}
  {% set tactic_width = 198 %}
  {% set tactic_height = 49 %}
  {% set border_height = (techinque_offset * (techniques | length)) + technique_space + tactic_height - 1 %}
  {% set width = tactic_width + 2 %}
  {% set height = border_height + 2 %}
  width="{{width}}px" height="{{height}}px" viewBox="-0.5 -0.5 {{width}} {{height}}]">
  <defs />
  <g>
    {% set x_tactic_position = 1 %}
    {% set y_tactic_position = 1 %}
    <g id="cell-tactic-{{mitre_id}}">
      <g>
        <rect x="{{x_tactic_position}}" y="{{y_tactic_position}}" width="{{tactic_width}}" height="{{tactic_height}}"
          fill="light-dark(#ffffff, #121212)" stroke="light-dark(#000000, #ffffff)" stroke-width="2" pointer-events="all"/>
      </g>
      <g>
        <switch>
          <foreignObject x="{{x_tactic_position}}" y="{{y_tactic_position}}" width="{{tactic_width}}" height="{{tactic_height}}"
            style="overflow: visible; text-align: left;" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
            <div xmlns="http://www.w3.org/1999/xhtml"
                style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;
                  box-sizing: border-box; font-size: 15px; font-family: Helvetica; color: light-dark(#000000, #ffffff);
                  line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; text-align: center;">
              {{name}}
            </div>
          </foreignObject>
        </switch>
      </g>
    </g>
    <g id="cell-border-{{mitre_id}}">
      <g>
        <rect x="{{x_tactic_position}}" y="{{y_tactic_position}}" width="{{tactic_width}}" height="{{border_height}}"
          fill="none" stroke="light-dark(#000000, #ffffff)" stroke-width="2" pointer-events="all"/>
      </g>
    </g>
    {% set x_technique_position = x_tactic_position + technique_space %}
    {% set y_technique_offset = 74 %}
    {% for technique in techniques %}
    {% set y_technique_position = (techinque_offset * (loop.index - 1)) + y_technique_offset%}
    <g id="cell-technique-{{technique.mitre_id}}">
      <g>
        <rect x="{{x_technique_position}}" y="{{y_technique_position}}" width="{{technique_width}}" height="{{technique_height}}"
          fill="light-dark(#ffffff, #121212)" stroke="light-dark(#000000, #ffffff)" pointer-events="all"/>
      </g>
      <g>
        <switch>
          <foreignObject x="{{x_technique_position}}" y="{{y_technique_position}}" width="{{technique_width}}" height="{{technique_height}}"
            style="overflow: visible; text-align: left;" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
            <div xmlns="http://www.w3.org/1999/xhtml" 
              style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;
                box-sizing: border-box; font-size: 15px; font-family: Helvetica; color: light-dark(#000000, #ffffff);
                line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; text-align: center;">
              {{technique.name}}
            </div>
          </foreignObject>
        </switch>
      </g>
    </g>
    {% endfor %}{# endfor techniques #}
  </g>
</svg>